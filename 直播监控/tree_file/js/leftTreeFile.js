
var globalData = {
    fileArr : [
        {name:"文件夹1", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false},
                        {name:"机位1", level:2, id:10101, children:false},
                        {name:"机位1", level:2, id:10101, children:false},
                        {name:"机位1", level:2, id:10101, children:false},
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },
        {name:"文件夹2", level:0, id:1, children:[
                {name:"子文件1", level:1, id:101, children:[
                        {name:"机位1", level:2, id:10101, children:false}
                    ]},
                {name:"子文件2", level:1, id:102, children:[
                        {name:"机位2", level:2, id:10201, children:false}
                    ]},
                {name:"子文件3", level:1, id:103, children:[
                        {name:"机位3", level:2, id:10301, children:false}
                    ]}
            ]
        },



    ]
}

var init = {
    render(){
        let htmlArr = ''
        globalData.fileArr.forEach(item=>{
            let resHtml = init.loopTree(item.children);
            htmlArr += `
            <li class="itemFile">
                            <span class="folder size1" data-flag="false"><span class="showIcon"></span>${item.name}</span>
                            <ul class="lineIcon">
                                ${ resHtml }
                            </ul>
                        </li>
            `
        })
        $(".treeview ul").html(htmlArr);
        $(".showIcon").css({
            "background-image": `url(${init.imgPath()}sq-icon.png)`,
        })
    },
    imgPath(){
        return '../img/';
    },
    loopTree(data){
        // console.log(data);
        if(!data){
            return;
        }else{
            let htmlArr = []
            data.forEach((item,index)=>{
                if(item.children){
                    let resHtml = init.loopTree(item.children);
                    html = `
                        <li class="itemFile">
                            <span class="folder size2" data-flag="false"><span class="showIcon"></span>${item.name}</span>
                            <ul class="lineIcon">
                                ${ resHtml }
                            </ul>
                        </li>
                    `;
                } else {
                    html = `
                        <li class="itemFile">
                            <span class="file size3" data-id="${item.id}"><span class="item-line-icon"></span>
                            <img src="${init.imgPath() + 'sxt-icon.png'}"></img>
                            ${item.name}</span>
                        </li>

                    `;
                }
                htmlArr.push(html);
            })
            let returnHtml = ''
            htmlArr.forEach(item=>{
                returnHtml+=item;
            })
            return returnHtml;
        }
    }
}
var listen = {
    // 监听 树形文件 点击事件
    folder(){
        $(".folder").click(function(e){
            let items = {...e.currentTarget.dataset};
            if(items.flag == 'true'){
                items.flag = false;
                e.currentTarget.dataset.flag = false;
                $(this).siblings('ul').hide();
                $(this).children("span").css({
                    "background-image": `url(${init.imgPath()}sq-icon.png)`,
                })
            }else{
                items.flag = true;
                e.currentTarget.dataset.flag = true;
                $(this).siblings('ul').show();
                $(this).children("span").css({
                    "background-image": `url(${init.imgPath()}zk-icon.png)`,
                })
            }
        })
        // 选中 机位
        $(".file").click(function(){
            $(".file").css({
                "color": "#fff"
            })
            $(".file img").attr("src", init.imgPath() + 'sxt-icon.png');
            $(this).parent().siblings().children("span.file").css({
                "color":"#fff",
            })
            $(this).css({
                "color": "rgb(0, 255, 252)",
            })
            $(this).children("img").attr("src", init.imgPath() + 'sxt-icon-sel.png');
        })
    }
}
$(function(){
    // 树状文件 渲染
    init.render();
    // 监听 树形文件 点击事件
    listen.folder();
})
